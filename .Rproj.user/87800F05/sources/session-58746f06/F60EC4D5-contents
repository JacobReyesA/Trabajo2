#Procesamiento de variables
#llamada de paquetes
install.packages("pacman")
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven)
#Cargar Base de Datos
lapopchi2023 <- read_dta("ipo/input/data-orig/lapopchile2023.dta", encoding = "UTF-8")
head(lapopchi2023)
dim(lapopchi2023)
#Selección de variables
proc_data <- lapopchi2023 %>% select(b37, # Confianza en los medios de comunicación 
                                     immig1xa, #Actitud a Servicios Sociales a Venezolanos
                                     immig1xb, #Actitud a Servicios Sociales a Inmigrantes
                                     immig1xc, #Actitud a Servicios Sociales a Españoles
                                     comcon3xa, #Actitud a tener vecinos Venezolanos
                                     comcon3xb, #Actitud a tener vecinos Inmigrantes
                                     comcon3xc) #Actitud a tener vecinos Españoles
sjlabelled::get_label(proc_data)
#Procesamiento de variables
#a) Descriptivo general
frq(proc_data$b37)
frq(proc_data$immig1xa) #Mayor valor representa mayor desacuerdo, creo que sería mejor cambiarle el orden
is.na(proc_data)
#b) Recodificación
proc_data$immig1xa <- recode(proc_data$immig1xa, "1=5; 2=4; 3=3; 4=2; 5=1")
proc_data$immig1xb <- recode(proc_data$immig1xb, "1=5; 2=4; 3=3; 4=2; 5=1")
proc_data$immig1xc <- recode(proc_data$immig1xc, "1=5; 2=4; 3=3; 4=2; 5=1")
proc_data$comcon3xa <- recode(proc_data$comcon3xa, "1=4; 2=3; 3=3; 4=1")
proc_data$comcon3xb <- recode(proc_data$comcon3xb, "1=4; 2=3; 3=3; 4=1")
proc_data$comcon3xc <- recode(proc_data$comcon3xc, "1=4; 2=3; 3=3; 4=1")
#Queda cambiarles el label a cada categoría
proc_data$immig1xa <- set_labels(proc_data$immig1xa,
                                 labels = c("Muy en desacuerdo" = 1,
                                            "Algo en desacuerdo" = 2,
                                            "Ni de acuerdo ni en desacuerdo" = 3,
                                            "Algo de acuerdo"  = 4,
                                            "Muy de acuerdo" =5))
proc_data$comcon3xa <- set_labels(proc_data$comcon3xa,
                                  labels = c("Nada" = 1,
                                             "Poco" = 2,
                                             "Algo" = 3,
                                             "Mucho" = 4))
frq(proc_data$comcon3xa)
